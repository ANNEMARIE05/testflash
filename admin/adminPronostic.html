<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Admin</title>
    <link rel="shortcut icon" href="/assets/img/log.jpeg" type="image/jpeg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gray-50 font-sans">
    <div class="flex h-screen">
        <aside id="menu" class="bg-white shadow-lg w-64 fixed h-full z-30 transform -translate-x-full lg:translate-x-0 transition-transform duration-300">
            <div class="p-6 bg-blue-600 flex justify-between items-center">
                <h2 class="text-white text-xl font-bold">Admin Panel</h2>
                <button id="btnFermer" class="lg:hidden text-white hover:text-gray-200">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <nav class="mt-8">
                <a href="dashboardAdmin.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100 transition-colors">
                    <i class="fas fa-tachometer-alt mr-3"></i>
                    Dashboard
                </a>
                <a href="#" class="flex items-center px-6 py-3 text-blue-600 bg-blue-50 border-r-3 border-blue-600">
                    <i class="fas fa-plus-circle mr-3"></i>
                    Nouveau Pronostic
                </a>
                <a href="adminMesProno.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100 transition-colors">
                    <i class="fas fa-futbol mr-3"></i>
                    Mes Pronostiques
                </a>
                <a href="adminCoordonnee.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100 transition-colors">
                    <i class="fas fa-bell mr-3"></i>
                    Coordonnées
                </a>
                <a href="adminVideo.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100 transition-colors">
                    <i class="fas fa-video mr-3"></i>
                    Nouvelle Vidéo
                </a>
                <a href="adminHistorique.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100 transition-colors">
                    <i class="fas fa-history mr-3"></i>
                    Mes Historiques
                </a>
                <a href="adminUser.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100 transition-colors">
                    <i class="fas fa-users mr-3"></i>
                    Utilisateurs
                </a>
                <a href="adminTransaction.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100 transition-colors">
                    <i class="fas fa-credit-card mr-3"></i>
                    Transactions
                </a>
                <a href="adminBonus.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100 transition-colors">
                    <i class="fas fa-gift mr-3"></i>
                    Bonus
                </a>
                <a href="adminVip.html" class="flex items-center px-6 py-3 text-gray-700 hover:bg-gray-100 transition-colors">
                    <i class="fas fa-crown mr-3"></i>
                    Utilisateurs VIP
                </a>
                <button id="btnDeco" class="w-full flex items-center px-6 py-3 text-red-600 hover:bg-red-50 transition-colors mt-8">
                    <i class="fas fa-sign-out-alt mr-3"></i>
                    Déconnexion
                </button>
            </nav>
        </aside>

        <div class="flex-1 lg:ml-64">
            <header class="bg-white shadow-sm border-b">
                <div class="flex items-center justify-between px-4 lg:px-6 py-4">
                    <div class="flex items-center">
                        <button id="btnOuvrir" class="lg:hidden text-gray-600 mr-4">
                            <i class="fas fa-bars text-xl"></i>
                        </button>
                        <h1 class="text-xl lg:text-2xl font-semibold text-gray-800">Nouveau Pronostic</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <i class="fas fa-bell text-gray-600 text-lg lg:text-xl"></i>
                            <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center">3</span>
                        </div>
                        <img src="https://img.freepik.com/vecteurs-premium/icone-profil-avatar-par-defaut-image-utilisateur-medias-sociaux-icone-avatar-gris-silhouette-profil-vide-illustration-vectorielle_561158-3383.jpg" alt="Avatar" class="w-8 h-8 rounded-full">
                    </div>
                </div>
            </header>

            <main class="p-4 lg:p-6">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h2 class="text-xl font-semibold text-gray-800 mb-6">Informations du Match</h2>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2">Compétition</label>
                                <input type="text" id="comp" placeholder="Ex: Champions League" class="w-full bg-white border border-gray-300 text-gray-800 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-600">
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-2">Équipe Domicile</label>
                                    <input type="text" id="equDom" placeholder="Ex: PSG" class="w-full bg-white border border-gray-300 text-gray-800 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-600">
                                </div>
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-2">Équipe Extérieur</label>
                                    <input type="text" id="equExt" placeholder="Ex: Bayern" class="w-full bg-white border border-gray-300 text-gray-800 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-600">
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-2">Logo Domicile</label>
                                    <input type="file" id="imgDom" accept="image/*" class="w-full bg-white border border-gray-300 text-gray-800 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-600">
                                </div>
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-2">Logo Extérieur</label>
                                    <input type="file" id="imgExt" accept="image/*" class="w-full bg-white border border-gray-300 text-gray-800 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-600">
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-2">Date</label>
                                    <input type="date" id="dt" class="w-full bg-white border border-gray-300 text-gray-800 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-600">
                                </div>
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-2">Heure</label>
                                    <input type="time" id="hr" class="w-full bg-white border border-gray-300 text-gray-800 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-600">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h2 class="text-xl font-semibold text-gray-800 mb-6">Détails du Pronostic</h2>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2">Type de Pari</label>
                                <select id="tp" class="w-full bg-white border border-gray-300 text-gray-800 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-600">
                                    <option value="">Sélectionner le type</option>
                                    <option value="1X2">1X2</option>
                                    <option value="BTTS">BTTS</option>
                                    <option value="Over/Under">Over/Under</option>
                                    <option value="Handicap">Handicap</option>
                                    <option value="Score Exact">Score Exact</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2">Cote</label>
                                <input type="number" id="ct" step="0.01" placeholder="Ex: 1.75" class="w-full bg-white border border-gray-300 text-gray-800 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-600">
                            </div>

                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2">Niveau de Confiance (%)</label>
                                <input type="number" id="conf" min="0" max="100" placeholder="Ex: 92" class="w-full bg-white border border-gray-300 text-gray-800 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-600">
                            </div>

                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2">Statut</label>
                                <select id="stat" class="w-full bg-white border border-gray-300 text-gray-800 rounded-lg px-3 py-2 focus:outline-none focus:border-blue-600">
                                    <option value="en-cours">En cours</option>
                                    <option value="gagne">Gagné</option>
                                    <option value="perdu">Perdu</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-6 bg-white rounded-lg shadow-xl p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">Aperçu du Pronostic</h2>
                    
                    <div class="max-w-sm mx-auto">
                        <div id="card" class="bg-white rounded-xl p-4 border border-gray-200 shadow-lg">
                            <div class="flex justify-between items-center mb-3">
                                <span id="prevComp" class="text-xs text-gray-500">Champions League</span>
                                <span id="prevStat" class="text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded-full">En cours</span>
                            </div>
                            
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex flex-col items-center">
                                    <img id="prevImgDom" src="https://via.placeholder.com/40" alt="Domicile" class="w-10 h-10 rounded mb-2">
                                    <span id="prevEquDom" class="text-gray-800 font-medium text-sm text-center">Équipe 1</span>
                                </div>
                                <span class="text-gray-400 text-lg font-bold">VS</span>
                                <div class="flex flex-col items-center">
                                    <img id="prevImgExt" src="https://via.placeholder.com/40" alt="Extérieur" class="w-10 h-10 rounded mb-2">
                                    <span id="prevEquExt" class="text-gray-800 font-medium text-sm text-center">Équipe 2</span>
                                </div>
                            </div>
                            
                            <p id="prevDtHr" class="text-gray-500 text-xs mb-3 text-center">Aujourd'hui 20:00</p>
                            
                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3 text-center">
                                <div id="prevTp" class="text-gray-800 font-bold text-sm">BTTS</div>
                                <div id="prevCt" class="text-xl font-black text-yellow-600">1.75</div>
                            </div>
                            
                            <div class="flex justify-between text-xs">
                                <span class="text-gray-500">Confiance</span>
                                <span id="prevConf" class="text-white font-bold px-2 py-1 rounded text-xs bg-green-600">92%</span>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-center space-x-4 mt-6">
                        <button onclick="ajouterProno()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium">
                            <i class="fas fa-plus mr-2"></i>Ajouter le Pronostic
                        </button>
                        <button onclick="viderTout()" class="bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors font-medium">
                            <i class="fas fa-eraser mr-2"></i>Vider
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden lg:hidden"></div>

    <script>
        const btnOuvrir = document.getElementById('btnOuvrir');
        const btnFermer = document.getElementById('btnFermer');
        const menu = document.getElementById('menu');
        const overlay = document.getElementById('overlay');

        btnOuvrir.addEventListener('click', () => {
            menu.classList.remove('-translate-x-full');
            overlay.classList.remove('hidden');
        });

        btnFermer.addEventListener('click', () => {
            menu.classList.add('-translate-x-full');
            overlay.classList.add('hidden');
        });

        overlay.addEventListener('click', () => {
            menu.classList.add('-translate-x-full');
            overlay.classList.add('hidden');
        });

        const champs = {
            comp: document.getElementById('comp'),
            equDom: document.getElementById('equDom'),
            equExt: document.getElementById('equExt'),
            imgDom: document.getElementById('imgDom'),
            imgExt: document.getElementById('imgExt'),
            dt: document.getElementById('dt'),
            hr: document.getElementById('hr'),
            tp: document.getElementById('tp'),
            ct: document.getElementById('ct'),
            conf: document.getElementById('conf'),
            stat: document.getElementById('stat')
        };

        const prev = {
            comp: document.getElementById('prevComp'),
            stat: document.getElementById('prevStat'),
            imgDom: document.getElementById('prevImgDom'),
            equDom: document.getElementById('prevEquDom'),
            equExt: document.getElementById('prevEquExt'),
            imgExt: document.getElementById('prevImgExt'),
            dtHr: document.getElementById('prevDtHr'),
            tp: document.getElementById('prevTp'),
            ct: document.getElementById('prevCt'),
            conf: document.getElementById('prevConf')
        };

        function majApercu() {
            prev.comp.textContent = champs.comp.value || 'Compétition';
            prev.equDom.textContent = champs.equDom.value || 'Équipe 1';
            prev.equExt.textContent = champs.equExt.value || 'Équipe 2';
            prev.tp.textContent = champs.tp.value || 'Type de pari';
            prev.ct.textContent = champs.ct.value || '0.00';

            if (champs.dt.value && champs.hr.value) {
                const date = new Date(champs.dt.value);
                const today = new Date();
                const tomorrow = new Date(today);
                tomorrow.setDate(tomorrow.getDate() + 1);
                
                let dateStr = '';
                if (date.toDateString() === today.toDateString()) {
                    dateStr = 'Aujourd\'hui';
                } else if (date.toDateString() === tomorrow.toDateString()) {
                    dateStr = 'Demain';
                } else {
                    dateStr = date.toLocaleDateString('fr-FR');
                }
                prev.dtHr.textContent = `${dateStr} ${champs.hr.value}`;
            }

            const statutTexte = {
                'en-cours': 'En cours',
                'gagne': 'Gagné',
                'perdu': 'Perdu'
            };
            const statutClass = {
                'en-cours': 'bg-orange-100 text-orange-700',
                'gagne': 'bg-green-100 text-green-700',
                'perdu': 'bg-red-100 text-red-700'
            };
            
            prev.stat.textContent = statutTexte[champs.stat.value] || 'En cours';
            prev.stat.className = `text-xs px-2 py-1 rounded-full ${statutClass[champs.stat.value] || 'bg-orange-100 text-orange-700'}`;

            if (champs.conf.value) {
                const confValue = parseInt(champs.conf.value);
                let confClass = 'bg-green-600';
                if (confValue < 70) confClass = 'bg-red-600';
                else if (confValue < 85) confClass = 'bg-yellow-600';
                
                prev.conf.textContent = `${confValue}%`;
                prev.conf.className = `text-white font-bold px-2 py-1 rounded text-xs ${confClass}`;
            }
        }

        function gererImg(input, previewImg) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewImg.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        }

        champs.imgDom.addEventListener('change', () => gererImg(champs.imgDom, prev.imgDom));
        champs.imgExt.addEventListener('change', () => gererImg(champs.imgExt, prev.imgExt));

        Object.values(champs).forEach(champ => {
            champ.addEventListener('input', majApercu);
            champ.addEventListener('change', majApercu);
        });

        function ajouterProno() {
            const donnees = {};
            let valide = true;
            
            Object.keys(champs).forEach(key => {
                if (key === 'imgDom' || key === 'imgExt') {
                    donnees[key] = champs[key].files[0] || null;
                } else {
                    donnees[key] = champs[key].value;
                }
                
                if (['comp', 'equDom', 'equExt', 'dt', 'hr', 'tp', 'ct', 'conf'].includes(key) && !champs[key].value) {
                    valide = false;
                }
            });

            if (!valide) {
                alert('Veuillez remplir tous les champs obligatoires');
                return;
            }

            console.log('Nouveau pronostic:', donnees);
            alert('Pronostic ajouté avec succès!');
            viderTout();
        }

        function viderTout() {
            Object.values(champs).forEach(champ => {
                champ.value = '';
            });
            prev.imgDom.src = 'https://via.placeholder.com/40';
            prev.imgExt.src = 'https://via.placeholder.com/40';
            majApercu();
        }

        const today = new Date().toISOString().split('T')[0];
        champs.dt.value = today;
        champs.hr.value = '20:00';
        majApercu();

        const btnDeco = document.getElementById('btnDeco');
        btnDeco.addEventListener('click', function(e) {
            e.preventDefault();
            if (confirm('Êtes-vous sûr de vouloir vous déconnecter ?')) {
                window.location.href = '/auth/login.html';
            }
        });
    </script>
</body>
</html>